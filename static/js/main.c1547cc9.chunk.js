(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{18:function(e,t,n){e.exports=n(32)},23:function(e,t,n){},24:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(16),i=n.n(r),l=n(1),o=n(2),c=n(4),m=n(3),u=n(8),d=(n(23),function(e){return e.data.isPressed?e.data.hasMine?s.a.createElement("div",{className:"bomb cell",onClick:function(){return e.click(e.data)},onContextMenu:function(e){e.preventDefault()}}):0===e.data.minesAround?s.a.createElement("div",{className:"pressed cell",onClick:function(){return e.click(e.data)},onContextMenu:function(t){t.preventDefault(),e.flag(e.data)}}):s.a.createElement("div",{className:"pressed cell",onClick:function(){return e.click(e.data)},onContextMenu:function(t){t.preventDefault(),e.flag(e.data)}},e.data.minesAround):e.data.hasFlag?s.a.createElement("div",{className:"flagged cell",onClick:function(){return e.click(e.data)},onContextMenu:function(t){t.preventDefault(),e.flag(e.data)}}):s.a.createElement("div",{className:"cell",onClick:function(){return e.click(e.data)},onContextMenu:function(t){t.preventDefault(),e.flag(e.data)}})}),p=function(e){var t=e.cells.map((function(t,n){return s.a.createElement(d,{key:n,data:t,click:e.click,flag:e.flag})}));return s.a.createElement("div",{className:"row"},t)},h=function(e){Object(c.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).createGrid=function(e){for(var t=[],n=0;n<e.rows;n++){t.push([]);for(var a=0;a<e.columns;a++)t[n].push({x:a,y:n,minesAround:0,hasMine:!1,isPressed:!1,hasFlag:!1})}for(var s=0;s<e.mines;s++){var r=Math.floor(Math.random()*e.rows),i=Math.floor(Math.random()*e.columns),l=t[r][i];l.hasMine?s--:l.hasMine=!0}return t},a.click=function(e){"ended"!==a.props.game&&"won"!==a.props.game&&new Promise((function(t){t(a.countNeighbours(e))})).then((function(t){var n=a.state.rows,s=n[e.y][e.x];if(s.minesAround=t,s.hasMine&&0===a.props.openedCells||0===a.props.openedCells&&s.minesAround>=1){var r=a.createGrid(a.props);a.setState({rows:r},(function(){a.click(e)}))}else s.isPressed||e.hasFlag||(a.props.onCellInspect(),s.isPressed=!0,a.setState({rows:n},(function(){a.winCheck()})),s.hasMine||0!==t||a.countEmptyCell(e),s.hasMine&&0!==a.props.openedCells&&(a.revealBombs(),a.props.finishGame()))}))},a.winCheck=function(){var e=a.state.rows;if(a.props.mines+a.props.openedCells>=a.props.columns*a.props.rows){for(var t=0;t<e.length;t++)for(var n=0;n<e[0].length;n++){var s=e[t][n];if(s.hasMine&&s.isPressed)return}a.props.winning()}},a.revealBombs=function(){for(var e=a.state.rows,t=0;t<e.length;t++)for(var n=0;n<e[0].length;n++){var s=e[t][n];s.hasMine&&!s.isPressed&&(s.isPressed=!0)}},a.countNeighbours=function(e){for(var t=0,n=-1;n<=1;n++)for(var s=-1;s<=1;s++)if(e.y+n>=0&&e.x+s>=0){var r=n+e.y,i=s+e.x;r<a.state.rows.length&&i<a.state.rows[0].length&&(!a.state.rows[r][i].hasMine||0===n&&0===s||t++)}return t},a.countEmptyCell=function(e){for(var t=a.state.rows,n=-1;n<=1;n++)for(var s=-1;s<=1;s++)if(e.y+n>=0&&e.x+s>=0){var r=n+e.y,i=s+e.x;r<a.state.rows.length&&i<a.state.rows[0].length&&(t[r][i].hasMine||t[r][i].isPressed||a.click(t[r][i]))}},a.flag=function(e){var t=a.state.rows;"ended"!==a.props.game&&"won"!==a.props.game&&"running"===a.props.game&&(e.isPressed||(e.hasFlag=!e.hasFlag,a.setState({rows:t}),a.props.changeFlagsNumber(e.hasFlag?-1:1)))},a.state={rows:a.createGrid(e)},a.isNew=!1,a}return Object(o.a)(n,[{key:"componentWillReceiveProps",value:function(e){(this.props.openedCells>e.openedCells||0===this.props.openedCells)&&this.setState({rows:this.createGrid(e)})}},{key:"render",value:function(){var e=this,t=this.state.rows.map((function(t,n){return s.a.createElement(p,{cells:t,key:n,click:e.click,flag:e.flag})}));return s.a.createElement("div",{className:"grid"},t)}}]),n}(a.Component),g=function(e){var t=Math.floor(e.time/60),n=e.time-60*t||0,a=t+":"+(n<10?"0":"")+n;return s.a.createElement("div",{className:"grid-header"},s.a.createElement("div",{className:"flags"},e.flags),s.a.createElement("button",{className:"reset",onClick:e.reset},"RESET"),s.a.createElement("div",{className:"timer"},a))},f=n(5),v=(n(24),n(10)),C=n.n(v);n(25);C.a.initializeApp({apiKey:"AIzaSyCu9A50p4clufXz8Ft-GJ7PeckR554OCpE",authDomain:"minesweeper-5e51e.firebaseapp.com",databaseURL:"https://minesweeper-5e51e.firebaseio.com",projectId:"minesweeper-5e51e",storageBucket:"minesweeper-5e51e.appspot.com",messagingSenderId:"778902912347",appId:"1:778902912347:web:8220def6b1ccb2ca9d2e7e",measurementId:"G-T22JZMP503"});var E=C.a,b=function(e){Object(c.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).onSaveTime=function(e){E.firestore().collection(a.props.category).add({name:a.state.name,highscore:a.props.time}),a.props.onClose()},a.state={name:""},a.onNameChange=a.onNameChange.bind(Object(f.a)(a)),a}return Object(o.a)(n,[{key:"onNameChange",value:function(e){this.setState({name:e.target.value})}},{key:"render",value:function(){var e=s.a.createElement("div",{className:"winningStyles"},s.a.createElement("div",{className:"Message"},"Congratulations, you beat the game in ",this.props.time," seconds!!!"),s.a.createElement("div",null,s.a.createElement("input",{type:"text",id:"name",onChange:this.onNameChange}),s.a.createElement("button",{className:"buttons",id:"save",onClick:this.onSaveTime},"Save my time")),s.a.createElement("div",null,s.a.createElement("button",{className:"buttons",id:"newgame",onClick:this.props.onNewGame},"New Game"),s.a.createElement("button",{className:"buttons",id:"cancel",onClick:this.props.onClose},"Cancel")));return this.props.isOpen||(e=null),s.a.createElement("div",null,e)}}]),n}(a.Component),w=function(e){Object(c.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).getCategory=function(){return 9===a.props.rows&&9===a.props.columns&&10===a.props.mines?"beginner":16===a.props.rows&&16===a.props.columns&&40===a.props.mines?"intermediate":16===a.props.rows&&30===a.props.columns&&99===a.props.mines?"expert":""},a.tick=function(){if(a.state.openedCells>0&&"running"===a.state.game){var e=a.state.time+1;a.setState({time:e})}},a.setInterval=function(e,t){a.intervals.push(setInterval(e,t))},a.reset=function(){a.newState={openedCells:0,time:0,rows:a.props.rows,columns:a.props.columns,mines:a.props.mines,flags:a.props.flags,game:"pending",category:a.getCategory()},a.intervals.map(clearInterval),a.setState(Object(u.a)({},a.newState),(function(){a.intervals=[]})),a.setState({isWinningDialog:!1})},a.finishGame=function(){a.setState({game:"ended"})},a.handleCellInspect=function(){"running"!==a.state.game&&0===a.state.openedCells&&a.setState({game:"running"},(function(){a.setInterval(a.tick,1e3)})),a.setState((function(e){return{openedCells:e.openedCells+1}}))},a.changeFlagsNumber=function(e){a.setState({flags:a.state.flags+e})},a.winning=function(){a.setState({game:"won",isWinningDialog:!0})},a.state={openedCells:0,time:0,rows:e.rows,columns:e.columns,mines:e.mines,flags:e.flags,game:"pending",isWinningDialog:!1,category:a.getCategory()},a}return Object(o.a)(n,[{key:"componentWillMount",value:function(){this.intervals=[]}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"minesweeper"},s.a.createElement(g,{time:this.state.time,flags:this.state.flags,reset:this.reset}),s.a.createElement(h,{game:this.state.game,openedCells:this.state.openedCells,rows:this.state.rows,columns:this.state.columns,mines:this.state.mines,changeFlagsNumber:this.changeFlagsNumber,onCellInspect:this.handleCellInspect,finishGame:this.finishGame,winning:this.winning}),s.a.createElement(b,{category:this.state.category,isOpen:this.state.isWinningDialog,onClose:function(t){return e.setState({isWinningDialog:!1})},onNewGame:this.reset,time:this.state.time}))}}]),n}(a.Component),k=n(6),y=(n(29),function(e){Object(c.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).selectedCheck=function(e){return 9===e.rows&&9===e.columns&&10===e.mines||16===e.rows&&16===e.columns&&40===e.mines||16===e.rows&&30===e.columns&&99===e.mines},a.checkCategory=function(e){return 9===e.rows&&9===e.columns&&10===e.mines?"beginner":16===e.rows&&16===e.columns&&40===e.mines?"intermediate":16===e.rows&&30===e.columns&&99===e.mines?"expert":"custom"},a.checkNumber=function(e,t,n){return e>n?n:e<t?t:e},a.validateMine=function(e,t,n){if(e*t>n)return Math.round(10*n)/10;var a=Math.round(e*t*.8*10)/10;return a<800?a:800},a.newGame=function(){if("beginner"===a.state.radio)a.props.onNewGame(9,9,10);else if("intermediate"===a.state.radio)a.props.onNewGame(16,16,40);else if("expert"===a.state.radio)a.props.onNewGame(16,30,99);else if("custom"===a.state.radio){var e=a.checkNumber(a.state.customrows,2,30),t=a.checkNumber(a.state.customcolumns,6,45),n=a.checkNumber(a.state.custommines,3,800),s=a.validateMine(e,t,n);a.setState({customrows:e,customcolumns:t,custommines:s}),a.props.onNewGame(e,t,s)}},a.state={radio:a.checkCategory(e),customrows:13,customcolumns:13,custommines:30,isCustomSelected:a.selectedCheck(e)},a.onChange=a.onChange.bind(Object(f.a)(a)),a.onCustomRowChange=a.onCustomRowChange.bind(Object(f.a)(a)),a.onCustomColumnChange=a.onCustomColumnChange.bind(Object(f.a)(a)),a.onCustomMinesChange=a.onCustomMinesChange.bind(Object(f.a)(a)),a}return Object(o.a)(n,[{key:"onChange",value:function(e){console.log(e.target.value),"custom"===e.target.value?this.setState(Object(k.a)({isCustomSelected:!1},e.target.name,e.target.value)):this.setState(Object(k.a)({isCustomSelected:!0},e.target.name,e.target.value))}},{key:"onCustomRowChange",value:function(e){this.setState({customrows:e.target.value})}},{key:"onCustomColumnChange",value:function(e){this.setState({customcolumns:e.target.value})}},{key:"onCustomMinesChange",value:function(e){this.setState({custommines:e.target.value})}},{key:"render",value:function(){var e=s.a.createElement("div",{className:"difficultyStyles"},s.a.createElement("table",null,s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",{id:"tableTitle"},"Difficulty"),s.a.createElement("td",{colSpan:"3"},s.a.createElement("button",{className:"closeButton",onClick:this.props.onClose},"x"))),s.a.createElement("tr",null,s.a.createElement("td",null),s.a.createElement("td",null,"Rows"),s.a.createElement("td",null,"Columns"),s.a.createElement("td",null,"Mines")),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("input",{type:"radio",onChange:this.onChange,value:"beginner",name:"radio",checked:"beginner"===this.state.radio,id:"begi"})," ",s.a.createElement("label",{htmlFor:"begi"},"Beginner")),s.a.createElement("td",null,"9"),s.a.createElement("td",null,"9"),s.a.createElement("td",null,"10")),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("input",{type:"radio",onChange:this.onChange,value:"intermediate",name:"radio",checked:"intermediate"===this.state.radio,id:"inter"})," ",s.a.createElement("label",{htmlFor:"inter"},"Intermediate")),s.a.createElement("td",null,"16"),s.a.createElement("td",null,"16"),s.a.createElement("td",null,"40")),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("input",{type:"radio",onChange:this.onChange,value:"expert",name:"radio",checked:"expert"===this.state.radio,id:"exp"})," ",s.a.createElement("label",{htmlFor:"exp"},"Expert")),s.a.createElement("td",null,"16"),s.a.createElement("td",null,"30"),s.a.createElement("td",null,"99")),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("input",{type:"radio",onChange:this.onChange,value:"custom",name:"radio",checked:"custom"===this.state.radio,id:"cust"})," ",s.a.createElement("label",{htmlFor:"cust"},"Custom")),s.a.createElement("td",null,s.a.createElement("input",{type:"number",value:this.state.customrows,onChange:this.onCustomRowChange,className:"custom",disabled:this.state.isCustomSelected})),s.a.createElement("td",null,s.a.createElement("input",{type:"number",value:this.state.customcolumns,onChange:this.onCustomColumnChange,className:"custom",disabled:this.state.isCustomSelected})),s.a.createElement("td",null,s.a.createElement("input",{type:"number",value:this.state.custommines,onChange:this.onCustomMinesChange,className:"custom",disabled:this.state.isCustomSelected}))))),s.a.createElement("button",{id:"newGame",onClick:this.newGame},"New Game"));return this.props.isOpen||(e=null),s.a.createElement("div",null,e)}}]),n}(a.Component)),N=(n(30),n(17));n(31);function O(e){var t=Object(a.useState)([]),n=Object(N.a)(t,2),s=n[0],r=n[1];return Object(a.useEffect)((function(){var t=E.firestore().collection(e).orderBy("highscore","asc").limit(5).onSnapshot((function(e){var t=e.docs.map((function(e){return Object(u.a)({id:e.id},e.data())}));r(t)}));return function(){return t()}}),[]),s}var S=function(){var e=O("beginner"),t=O("intermediate"),n=O("expert");return s.a.createElement("div",{className:"main"},s.a.createElement("div",{className:"category"},"Beginner",s.a.createElement("ol",null,e.map((function(e){return s.a.createElement("li",{key:e.id},s.a.createElement("div",null,e.name,s.a.createElement("code",null,"  ",e.highscore)))})))),s.a.createElement("div",{className:"category"},"Intermediate",s.a.createElement("ol",null,t.map((function(e){return s.a.createElement("li",{key:e.id},s.a.createElement("div",null,e.name,s.a.createElement("code",null,"  ",e.highscore)))})))),s.a.createElement("div",{className:"category"},"Expert",s.a.createElement("ol",null,n.map((function(e){return s.a.createElement("li",{key:e.id},s.a.createElement("div",null,e.name,s.a.createElement("code",null,"  ",e.highscore)))})))))},j=function(e){Object(c.a)(n,e);var t=Object(m.a)(n);function n(e){var s;return Object(l.a)(this,n),(s=t.call(this)).manageDifficulty=function(){s.state.isOpen?s.setState({isOpen:!1}):s.setState({isOpen:!0})},s.onNewGame=function(e,t,n){s.manageDifficulty(),s.setState({rows:e,columns:t,mines:n},(function(){s.game.current.reset()}))},s.state={isOpen:!1,rows:9,columns:9,mines:10},s.game=Object(a.createRef)(),s}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("button",{onClick:this.manageDifficulty},"Difficulty"),s.a.createElement(y,{isOpen:this.state.isOpen,onClose:function(t){return e.setState({isOpen:!1})},onNewGame:this.onNewGame,rows:this.state.rows,columns:this.state.columns,mines:this.state.mines}),s.a.createElement(w,{ref:this.game,rows:this.state.rows,columns:this.state.columns,mines:this.state.mines,flags:this.state.mines}),s.a.createElement(S,null))}}]),n}(a.Component);i.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(j,null)),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.c1547cc9.chunk.js.map