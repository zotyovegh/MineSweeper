(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],[,,,,,,,,,,function(e,t,n){e.exports=n(19)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),i=n(8),r=n.n(i),l=n(1),o=n(2),c=n(4),u=n(3),m=n(9),h=(n(15),function(e){return e.data.isPressed?e.data.hasMine?s.a.createElement("div",{className:"bomb cell",onClick:function(){return e.click(e.data)},onContextMenu:function(e){e.preventDefault()}}):0===e.data.minesAround?s.a.createElement("div",{className:"pressed cell",onClick:function(){return e.click(e.data)},onContextMenu:function(t){t.preventDefault(),e.flag(e.data)}}):s.a.createElement("div",{className:"pressed cell",onClick:function(){return e.click(e.data)},onContextMenu:function(t){t.preventDefault(),e.flag(e.data)}},e.data.minesAround):e.data.hasFlag?s.a.createElement("div",{className:"flagged cell",onClick:function(){return e.click(e.data)},onContextMenu:function(t){t.preventDefault(),e.flag(e.data)}}):s.a.createElement("div",{className:"cell",onClick:function(){return e.click(e.data)},onContextMenu:function(t){t.preventDefault(),e.flag(e.data)}})}),d=function(e){var t=e.cells.map((function(t,n){return s.a.createElement(h,{key:n,data:t,click:e.click,flag:e.flag})}));return s.a.createElement("div",{className:"row"},t)},p=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).createGrid=function(e){for(var t=[],n=0;n<e.rows;n++){t.push([]);for(var a=0;a<e.columns;a++)t[n].push({x:a,y:n,minesAround:0,hasMine:!1,isPressed:!1,hasFlag:!1})}for(var s=0;s<e.mines;s++){var i=Math.floor(Math.random()*e.rows),r=Math.floor(Math.random()*e.columns),l=t[i][r];l.hasMine?s--:l.hasMine=!0}return t},a.click=function(e){"ended"!==a.props.game&&"won"!==a.props.game&&new Promise((function(t){t(a.countNeighbours(e))})).then((function(t){var n=a.state.rows,s=n[e.y][e.x];if(s.hasMine&&0===a.props.openedCells){var i=a.createGrid(a.props);a.setState({rows:i},(function(){a.click(e)}))}else s.isPressed||e.hasFlag||(a.props.onCellInspect(),s.isPressed=!0,s.minesAround=t,a.setState({rows:n},(function(){a.winCheck()})),s.hasMine||0!==t||a.countEmptyCell(e),s.hasMine&&0!==a.props.openedCells&&(a.revealBombs(),a.props.finishGame()))}))},a.winCheck=function(){var e=a.state.rows;if(a.props.mines+a.props.openedCells>=a.props.columns*a.props.rows){for(var t=0;t<e.length;t++)for(var n=0;n<e[0].length;n++){var s=e[t][n];if(s.hasMine&&s.isPressed)return}a.props.winning()}},a.revealBombs=function(){for(var e=a.state.rows,t=0;t<e.length;t++)for(var n=0;n<e[0].length;n++){var s=e[t][n];s.hasMine&&!s.isPressed&&(s.isPressed=!0)}},a.countNeighbours=function(e){for(var t=0,n=-1;n<=1;n++)for(var s=-1;s<=1;s++)if(e.y+n>=0&&e.x+s>=0){var i=n+e.y,r=s+e.x;i<a.state.rows.length&&r<a.state.rows[0].length&&(!a.state.rows[i][r].hasMine||0===n&&0===s||t++)}return t},a.countEmptyCell=function(e){for(var t=a.state.rows,n=-1;n<=1;n++)for(var s=-1;s<=1;s++)if(e.y+n>=0&&e.x+s>=0){var i=n+e.y,r=s+e.x;i<a.state.rows.length&&r<a.state.rows[0].length&&(t[i][r].hasMine||t[i][r].isPressed||a.click(t[i][r]))}},a.flag=function(e){var t=a.state.rows;"ended"!==a.props.game&&"won"!==a.props.game&&"running"===a.props.game&&(e.isPressed||(e.hasFlag=!e.hasFlag,a.setState({rows:t}),a.props.changeFlagsNumber(e.hasFlag?-1:1)))},a.state={rows:a.createGrid(e)},a.isNew=!1,a}return Object(o.a)(n,[{key:"componentWillReceiveProps",value:function(e){(this.props.openedCells>e.openedCells||0===this.props.openedCells)&&this.setState({rows:this.createGrid(e)})}},{key:"render",value:function(){var e=this,t=this.state.rows.map((function(t,n){return s.a.createElement(d,{cells:t,key:n,click:e.click,flag:e.flag})}));return s.a.createElement("div",{className:"grid"},t)}}]),n}(a.Component),f=function(e){var t=Math.floor(e.time/60),n=e.time-60*t||0,a=t+":"+(n<10?"0":"")+n;return s.a.createElement("div",{className:"grid-header"},s.a.createElement("div",{className:"flags"},e.flags),s.a.createElement("button",{className:"reset",onClick:e.reset},"RESET"),s.a.createElement("div",{className:"timer"},a))},g=(n(16),function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={},a}return Object(o.a)(n,[{key:"render",value:function(){var e=s.a.createElement("div",{className:"winningStyles"},s.a.createElement("div",{className:"Message"},"Congratulations, you beat the game in ",this.props.time," seconds!!!"),s.a.createElement("div",null,s.a.createElement("button",{className:"buttons",id:"newgame",onClick:this.props.onNewGame},"New Game"),s.a.createElement("button",{className:"buttons",id:"cancel",onClick:this.props.onClose},"Cancel")));return this.props.isOpen||(e=null),s.a.createElement("div",null,e)}}]),n}(a.Component)),v=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={openedCells:0,time:0,rows:e.props.rows,columns:e.props.columns,mines:e.props.mines,flags:e.props.flags,game:"pending",isWinningDialog:!1},e.tick=function(){if(e.state.openedCells>0&&"running"===e.state.game){var t=e.state.time+1;e.setState({time:t})}},e.setInterval=function(t,n){e.intervals.push(setInterval(t,n))},e.reset=function(){e.newState={openedCells:0,time:0,rows:e.props.rows,columns:e.props.columns,mines:e.props.mines,flags:e.props.flags,game:"pending"},e.intervals.map(clearInterval),e.setState(Object(m.a)({},e.newState),(function(){e.intervals=[]})),e.setState({isWinningDialog:!1})},e.finishGame=function(){e.setState({game:"ended"})},e.handleCellInspect=function(){"running"!==e.state.game&&0===e.state.openedCells&&e.setState({game:"running"},(function(){e.setInterval(e.tick,1e3)})),e.setState((function(e){return{openedCells:e.openedCells+1}}))},e.changeFlagsNumber=function(t){e.setState({flags:e.state.flags+t})},e.winning=function(){e.setState({game:"won",isWinningDialog:!0})},e.onSaveTime=function(){e.setState({isWinningDialog:!1})},e}return Object(o.a)(n,[{key:"componentWillMount",value:function(){this.intervals=[]}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"minesweeper"},s.a.createElement(f,{time:this.state.time,flags:this.state.flags,reset:this.reset}),s.a.createElement(p,{game:this.state.game,openedCells:this.state.openedCells,rows:this.state.rows,columns:this.state.columns,mines:this.state.mines,changeFlagsNumber:this.changeFlagsNumber,onCellInspect:this.handleCellInspect,finishGame:this.finishGame,winning:this.winning}),s.a.createElement(g,{isOpen:this.state.isWinningDialog,onClose:function(t){return e.setState({isWinningDialog:!1})},onNewGame:this.reset,onSaveTime:this.onSaveTime,time:this.state.time}))}}]),n}(a.Component),C=n(6),w=n(5),E=(n(17),function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).selectedCheck=function(e){return 9===e.rows&&9===e.columns&&10===e.mines||16===e.rows&&16===e.columns&&40===e.mines||16===e.rows&&30===e.columns&&99===e.mines},a.checkCategory=function(e){return 9===e.rows&&9===e.columns&&10===e.mines?"beginner":16===e.rows&&16===e.columns&&40===e.mines?"intermediate":16===e.rows&&30===e.columns&&99===e.mines?"expert":"custom"},a.checkNumber=function(e,t,n){return e>n?n:e<t?t:e},a.validateMine=function(e,t,n){if(e*t>n)return Math.round(10*n)/10;var a=Math.round(e*t*.8*10)/10;return a<800?a:800},a.newGame=function(){if("beginner"===a.state.radio)a.props.onNewGame(9,9,10);else if("intermediate"===a.state.radio)a.props.onNewGame(16,16,40);else if("expert"===a.state.radio)a.props.onNewGame(16,30,99);else if("custom"===a.state.radio){var e=a.checkNumber(a.state.customrows,2,30),t=a.checkNumber(a.state.customcolumns,6,45),n=a.checkNumber(a.state.custommines,3,800),s=a.validateMine(e,t,n);a.setState({customrows:e,customcolumns:t,custommines:s}),a.props.onNewGame(e,t,s)}},a.state={radio:a.checkCategory(e),customrows:13,customcolumns:13,custommines:30,isCustomSelected:a.selectedCheck(e)},a.onChange=a.onChange.bind(Object(w.a)(a)),a.onCustomRowChange=a.onCustomRowChange.bind(Object(w.a)(a)),a.onCustomColumnChange=a.onCustomColumnChange.bind(Object(w.a)(a)),a.onCustomMinesChange=a.onCustomMinesChange.bind(Object(w.a)(a)),a}return Object(o.a)(n,[{key:"onChange",value:function(e){console.log(e.target.value),"custom"===e.target.value?this.setState(Object(C.a)({isCustomSelected:!1},e.target.name,e.target.value)):this.setState(Object(C.a)({isCustomSelected:!0},e.target.name,e.target.value))}},{key:"onCustomRowChange",value:function(e){this.setState({customrows:e.target.value})}},{key:"onCustomColumnChange",value:function(e){this.setState({customcolumns:e.target.value})}},{key:"onCustomMinesChange",value:function(e){this.setState({custommines:e.target.value})}},{key:"render",value:function(){var e=s.a.createElement("div",{className:"difficultyStyles"},s.a.createElement("table",null,s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",{id:"tableTitle"},"Difficulty"),s.a.createElement("td",{colSpan:"3"},s.a.createElement("button",{className:"closeButton",onClick:this.props.onClose},"x"))),s.a.createElement("tr",null,s.a.createElement("td",null),s.a.createElement("td",null,"Rows"),s.a.createElement("td",null,"Columns"),s.a.createElement("td",null,"Mines")),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("input",{type:"radio",onChange:this.onChange,value:"beginner",name:"radio",checked:"beginner"===this.state.radio,id:"begi"})," ",s.a.createElement("label",{htmlFor:"begi"},"Beginner")),s.a.createElement("td",null,"9"),s.a.createElement("td",null,"9"),s.a.createElement("td",null,"10")),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("input",{type:"radio",onChange:this.onChange,value:"intermediate",name:"radio",checked:"intermediate"===this.state.radio,id:"inter"})," ",s.a.createElement("label",{htmlFor:"inter"},"Intermediate")),s.a.createElement("td",null,"16"),s.a.createElement("td",null,"16"),s.a.createElement("td",null,"40")),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("input",{type:"radio",onChange:this.onChange,value:"expert",name:"radio",checked:"expert"===this.state.radio,id:"exp"})," ",s.a.createElement("label",{htmlFor:"exp"},"Expert")),s.a.createElement("td",null,"16"),s.a.createElement("td",null,"30"),s.a.createElement("td",null,"99")),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("input",{type:"radio",onChange:this.onChange,value:"custom",name:"radio",checked:"custom"===this.state.radio,id:"cust"})," ",s.a.createElement("label",{htmlFor:"cust"},"Custom")),s.a.createElement("td",null,s.a.createElement("input",{type:"number",value:this.state.customrows,onChange:this.onCustomRowChange,className:"custom",disabled:this.state.isCustomSelected})),s.a.createElement("td",null,s.a.createElement("input",{type:"number",value:this.state.customcolumns,onChange:this.onCustomColumnChange,className:"custom",disabled:this.state.isCustomSelected})),s.a.createElement("td",null,s.a.createElement("input",{type:"number",value:this.state.custommines,onChange:this.onCustomMinesChange,className:"custom",disabled:this.state.isCustomSelected}))))),s.a.createElement("button",{id:"newGame",onClick:this.newGame},"New Game"));return this.props.isOpen||(e=null),s.a.createElement("div",null,e)}}]),n}(a.Component)),b=(n(18),function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(l.a)(this,n),(s=t.call(this)).manageDifficulty=function(){s.state.isOpen?s.setState({isOpen:!1}):s.setState({isOpen:!0})},s.onNewGame=function(e,t,n){s.manageDifficulty(),s.setState({rows:e,columns:t,mines:n},(function(){s.game.current.reset()}))},s.state={isOpen:!1,rows:9,columns:9,mines:10},s.game=Object(a.createRef)(),s}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("button",{onClick:this.manageDifficulty},"Difficulty"),s.a.createElement(E,{isOpen:this.state.isOpen,onClose:function(t){return e.setState({isOpen:!1})},onNewGame:this.onNewGame,rows:this.state.rows,columns:this.state.columns,mines:this.state.mines}),s.a.createElement(v,{ref:this.game,rows:this.state.rows,columns:this.state.columns,mines:this.state.mines,flags:this.state.mines}))}}]),n}(a.Component));r.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(b,null)),document.getElementById("root"))}],[[10,1,2]]]);
//# sourceMappingURL=main.686831b5.chunk.js.map