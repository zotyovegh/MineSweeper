(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{18:function(e,t,a){e.exports=a(32)},23:function(e,t,a){},24:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(16),i=a.n(r),l=a(1),o=a(2),c=a(4),m=a(3),u=a(8),d=(a(23),function(e){var t="";1===e.data.minesAround?t="blue":2===e.data.minesAround?t="green":3===e.data.minesAround?t="red":4===e.data.minesAround?t="purple":5===e.data.minesAround?t="maroon":6===e.data.minesAround?t="turquoise":7===e.data.minesAround?t="black":8===e.data.minesAround&&(t="gray");var a={color:t};return e.data.isPressed?e.data.hasMine?s.a.createElement("div",{className:"bomb cell",onClick:function(){return e.click(e.data)},onContextMenu:function(e){e.preventDefault()}}):0===e.data.minesAround?s.a.createElement("div",{className:"pressed cell",onClick:function(){return e.click(e.data)},onContextMenu:function(t){t.preventDefault(),e.flag(e.data)}}):s.a.createElement("div",{style:a,className:"pressed cell",onClick:function(){return e.click(e.data)},onContextMenu:function(t){t.preventDefault(),e.flag(e.data)}},e.data.minesAround):e.data.hasFlag?s.a.createElement("div",{className:"flagged cell",onClick:function(){return e.click(e.data)},onContextMenu:function(t){t.preventDefault(),e.flag(e.data)}}):s.a.createElement("div",{className:"cell",onClick:function(){return e.click(e.data)},onContextMenu:function(t){t.preventDefault(),e.flag(e.data)}})}),p=function(e){var t=e.cells.map((function(t,a){return s.a.createElement(d,{key:a,data:t,click:e.click,flag:e.flag})}));return s.a.createElement("div",{className:"row"},t)},h=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).createGrid=function(e){for(var t=[],a=0;a<e.rows;a++){t.push([]);for(var n=0;n<e.columns;n++)t[a].push({x:n,y:a,minesAround:0,hasMine:!1,isPressed:!1,hasFlag:!1})}for(var s=0;s<e.mines;s++){var r=Math.floor(Math.random()*e.rows),i=Math.floor(Math.random()*e.columns),l=t[r][i];l.hasMine?s--:l.hasMine=!0}return t},n.click=function(e){"ended"!==n.props.game&&"won"!==n.props.game&&new Promise((function(t){t(n.countNeighbours(e))})).then((function(t){var a=n.state.rows,s=a[e.y][e.x];if(s.minesAround=t,s.hasMine&&0===n.props.openedCells||0===n.props.openedCells&&s.minesAround>=1){var r=n.createGrid(n.props);n.setState({rows:r},(function(){n.click(e)}))}else s.isPressed||e.hasFlag||(n.props.onCellInspect(),s.isPressed=!0,n.setState({rows:a},(function(){n.winCheck()})),s.hasMine||0!==t||n.countEmptyCell(e),s.hasMine&&0!==n.props.openedCells&&(n.revealBombs(),n.props.finishGame()))}))},n.winCheck=function(){var e=n.state.rows;if(n.props.mines+n.props.openedCells>=n.props.columns*n.props.rows){for(var t=0;t<e.length;t++)for(var a=0;a<e[0].length;a++){var s=e[t][a];if(s.hasMine&&s.isPressed)return}n.props.winning()}},n.revealBombs=function(){for(var e=n.state.rows,t=0;t<e.length;t++)for(var a=0;a<e[0].length;a++){var s=e[t][a];s.hasMine&&!s.isPressed&&(s.isPressed=!0)}},n.countNeighbours=function(e){for(var t=0,a=-1;a<=1;a++)for(var s=-1;s<=1;s++)if(e.y+a>=0&&e.x+s>=0){var r=a+e.y,i=s+e.x;r<n.state.rows.length&&i<n.state.rows[0].length&&(!n.state.rows[r][i].hasMine||0===a&&0===s||t++)}return t},n.countEmptyCell=function(e){for(var t=n.state.rows,a=-1;a<=1;a++)for(var s=-1;s<=1;s++)if(e.y+a>=0&&e.x+s>=0){var r=a+e.y,i=s+e.x;r<n.state.rows.length&&i<n.state.rows[0].length&&(t[r][i].hasMine||t[r][i].isPressed||n.click(t[r][i]))}},n.flag=function(e){var t=n.state.rows;"ended"!==n.props.game&&"won"!==n.props.game&&"running"===n.props.game&&(e.isPressed||(e.hasFlag=!e.hasFlag,n.setState({rows:t}),n.props.changeFlagsNumber(e.hasFlag?-1:1)))},n.state={rows:n.createGrid(e)},n.isNew=!1,n}return Object(o.a)(a,[{key:"componentWillReceiveProps",value:function(e){(this.props.openedCells>e.openedCells||0===this.props.openedCells)&&this.setState({rows:this.createGrid(e)})}},{key:"render",value:function(){var e=this,t=this.state.rows.map((function(t,a){return s.a.createElement(p,{cells:t,key:a,click:e.click,flag:e.flag})}));return s.a.createElement("div",{className:"grid"},t)}}]),a}(n.Component),g=function(e){var t=Math.floor(e.time/60),a=e.time-60*t||0,n=t+":"+(a<10?"0":"")+a;return s.a.createElement("div",{className:"grid-header"},s.a.createElement("div",{className:"flags"},e.flags),s.a.createElement("button",{className:"reset",onClick:e.reset},"RESET"),s.a.createElement("div",{className:"timer"},n))},f=a(5),v=(a(24),a(10)),C=a.n(v);a(25);C.a.initializeApp({apiKey:"AIzaSyCu9A50p4clufXz8Ft-GJ7PeckR554OCpE",authDomain:"minesweeper-5e51e.firebaseapp.com",databaseURL:"https://minesweeper-5e51e.firebaseio.com",projectId:"minesweeper-5e51e",storageBucket:"minesweeper-5e51e.appspot.com",messagingSenderId:"778902912347",appId:"1:778902912347:web:8220def6b1ccb2ca9d2e7e",measurementId:"G-T22JZMP503"});var E=C.a,b=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onSaveTime=function(e){E.firestore().collection(n.props.category).add({name:n.state.name,highscore:n.props.time}),n.props.onClose()},n.state={name:""},n.onNameChange=n.onNameChange.bind(Object(f.a)(n)),n}return Object(o.a)(a,[{key:"onNameChange",value:function(e){this.setState({name:e.target.value})}},{key:"render",value:function(){var e=s.a.createElement("div",{className:"winningStyles"},s.a.createElement("div",{className:"Message"},"Congratulations, you beat the game in ",this.props.time," seconds!!!"),(-1===this.props.limit||this.props.limit>this.props.time)&&s.a.createElement("div",null,s.a.createElement("input",{type:"text",id:"name",onChange:this.onNameChange}),s.a.createElement("button",{className:"buttons",id:"save",onClick:this.onSaveTime},"Save my time")),s.a.createElement("div",null,s.a.createElement("button",{className:"buttons",id:"newgame",onClick:this.props.onNewGame},"New Game"),s.a.createElement("button",{className:"buttons",id:"cancel",onClick:this.props.onClose},"Cancel")));return this.props.isOpen||(e=null),s.a.createElement("div",null,e)}}]),a}(n.Component),w=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).getCategory=function(){return 9===n.props.rows&&9===n.props.columns&&10===n.props.mines?"beginner":16===n.props.rows&&16===n.props.columns&&40===n.props.mines?"intermediate":16===n.props.rows&&30===n.props.columns&&99===n.props.mines?"expert":""},n.tick=function(){if(n.state.openedCells>0&&"running"===n.state.game){var e=n.state.time+1;n.setState({time:e})}},n.setInterval=function(e,t){n.intervals.push(setInterval(e,t))},n.setLastValues=function(e,t,a){n.beginnerLast=e,n.intermediateLast=t,n.expertLast=a},n.reset=function(){n.newState={openedCells:0,time:0,rows:n.props.rows,columns:n.props.columns,mines:n.props.mines,flags:n.props.flags,game:"pending",category:n.getCategory()},n.intervals.map(clearInterval),n.setState(Object(u.a)({},n.newState),(function(){n.intervals=[]})),n.setState({isWinningDialog:!1})},n.finishGame=function(){n.setState({game:"ended"})},n.handleCellInspect=function(){"running"!==n.state.game&&0===n.state.openedCells&&n.setState({game:"running"},(function(){n.setInterval(n.tick,1e3)})),n.setState((function(e){return{openedCells:e.openedCells+1}}))},n.changeFlagsNumber=function(e){n.setState({flags:n.state.flags+e})},n.winning=function(){var e;"beginner"===n.state.category?e=n.beginnerLast:"intermediate"===n.state.category?e=n.intermediateLast:"expert"===n.state.category&&(e=n.expertLast),n.setState({limit:e,game:"won",isWinningDialog:!0})},n.state={openedCells:0,time:0,rows:e.rows,columns:e.columns,mines:e.mines,flags:e.flags,game:"pending",isWinningDialog:!1,category:n.getCategory(),limit:""},n.beginnerLast="",n.intermediateLast="",n.expertLast="",n}return Object(o.a)(a,[{key:"componentWillMount",value:function(){this.intervals=[]}},{key:"render",value:function(){var e=this,t={width:34*this.state.columns+(this.state.columns>=8?12:9)};return s.a.createElement("div",{className:"minesweeper"},s.a.createElement("div",{style:t},s.a.createElement(g,{time:this.state.time,flags:this.state.flags,reset:this.reset,columns:this.state.columns})),s.a.createElement("div",{style:t},s.a.createElement(h,{game:this.state.game,openedCells:this.state.openedCells,rows:this.state.rows,columns:this.state.columns,mines:this.state.mines,changeFlagsNumber:this.changeFlagsNumber,onCellInspect:this.handleCellInspect,finishGame:this.finishGame,winning:this.winning})),s.a.createElement(b,{category:this.state.category,isOpen:this.state.isWinningDialog,onClose:function(t){return e.setState({isWinningDialog:!1})},onNewGame:this.reset,time:this.state.time,limit:this.state.limit}))}}]),a}(n.Component),y=a(6),N=(a(29),function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).selectedCheck=function(e){return 9===e.rows&&9===e.columns&&10===e.mines||16===e.rows&&16===e.columns&&40===e.mines||16===e.rows&&30===e.columns&&99===e.mines},n.checkCategory=function(e){return 9===e.rows&&9===e.columns&&10===e.mines?"beginner":16===e.rows&&16===e.columns&&40===e.mines?"intermediate":16===e.rows&&30===e.columns&&99===e.mines?"expert":"custom"},n.checkNumber=function(e,t,a){return e>a?a:e<t?t:e},n.validateMine=function(e,t,a){if(e*t>a)return Math.round(10*a)/10;var n=Math.round(e*t*.8*10)/10;return n<800?n:800},n.newGame=function(){if("beginner"===n.state.radio)n.props.onNewGame(9,9,10);else if("intermediate"===n.state.radio)n.props.onNewGame(16,16,40);else if("expert"===n.state.radio)n.props.onNewGame(16,30,99);else if("custom"===n.state.radio){var e=n.checkNumber(n.state.customrows,2,30),t=n.checkNumber(n.state.customcolumns,6,45),a=n.checkNumber(n.state.custommines,3,800),s=n.validateMine(e,t,a);n.setState({customrows:e,customcolumns:t,custommines:s}),n.props.onNewGame(e,t,s)}},n.state={radio:n.checkCategory(e),customrows:13,customcolumns:13,custommines:30,isCustomSelected:n.selectedCheck(e)},n.onChange=n.onChange.bind(Object(f.a)(n)),n.onCustomRowChange=n.onCustomRowChange.bind(Object(f.a)(n)),n.onCustomColumnChange=n.onCustomColumnChange.bind(Object(f.a)(n)),n.onCustomMinesChange=n.onCustomMinesChange.bind(Object(f.a)(n)),n}return Object(o.a)(a,[{key:"onChange",value:function(e){console.log(e.target.value),"custom"===e.target.value?this.setState(Object(y.a)({isCustomSelected:!1},e.target.name,e.target.value)):this.setState(Object(y.a)({isCustomSelected:!0},e.target.name,e.target.value))}},{key:"onCustomRowChange",value:function(e){this.setState({customrows:e.target.value})}},{key:"onCustomColumnChange",value:function(e){this.setState({customcolumns:e.target.value})}},{key:"onCustomMinesChange",value:function(e){this.setState({custommines:e.target.value})}},{key:"render",value:function(){var e=s.a.createElement("div",{className:"difficultyStyles"},s.a.createElement("table",null,s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",{id:"tableTitle"},"Difficulty"),s.a.createElement("td",{colSpan:"3"},s.a.createElement("button",{className:"closeButton",onClick:this.props.onClose},"x"))),s.a.createElement("tr",null,s.a.createElement("td",null),s.a.createElement("td",null,"Rows"),s.a.createElement("td",null,"Columns"),s.a.createElement("td",null,"Mines")),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("input",{type:"radio",onChange:this.onChange,value:"beginner",name:"radio",checked:"beginner"===this.state.radio,id:"begi"})," ",s.a.createElement("label",{htmlFor:"begi"},"Beginner")),s.a.createElement("td",null,"9"),s.a.createElement("td",null,"9"),s.a.createElement("td",null,"10")),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("input",{type:"radio",onChange:this.onChange,value:"intermediate",name:"radio",checked:"intermediate"===this.state.radio,id:"inter"})," ",s.a.createElement("label",{htmlFor:"inter"},"Intermediate")),s.a.createElement("td",null,"16"),s.a.createElement("td",null,"16"),s.a.createElement("td",null,"40")),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("input",{type:"radio",onChange:this.onChange,value:"expert",name:"radio",checked:"expert"===this.state.radio,id:"exp"})," ",s.a.createElement("label",{htmlFor:"exp"},"Expert")),s.a.createElement("td",null,"16"),s.a.createElement("td",null,"30"),s.a.createElement("td",null,"99")),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("input",{type:"radio",onChange:this.onChange,value:"custom",name:"radio",checked:"custom"===this.state.radio,id:"cust"})," ",s.a.createElement("label",{htmlFor:"cust"},"Custom")),s.a.createElement("td",null,s.a.createElement("input",{type:"number",value:this.state.customrows,onChange:this.onCustomRowChange,className:"custom",disabled:this.state.isCustomSelected})),s.a.createElement("td",null,s.a.createElement("input",{type:"number",value:this.state.customcolumns,onChange:this.onCustomColumnChange,className:"custom",disabled:this.state.isCustomSelected})),s.a.createElement("td",null,s.a.createElement("input",{type:"number",value:this.state.custommines,onChange:this.onCustomMinesChange,className:"custom",disabled:this.state.isCustomSelected}))))),s.a.createElement("button",{id:"newGame",onClick:this.newGame},"New Game"));return this.props.isOpen||(e=null),s.a.createElement("div",null,e)}}]),a}(n.Component)),k=(a(30),a(17));a(31);function O(e){var t=Object(n.useState)([]),a=Object(k.a)(t,2),s=a[0],r=a[1];return Object(n.useEffect)((function(){var t=E.firestore().collection(e).orderBy("highscore","asc").limit(10).onSnapshot((function(e){var t=e.docs.map((function(e){return Object(u.a)({id:e.id},e.data())}));r(t)}));return function(){return t()}}),[e]),s}var S=function(e){var t=O("beginner"),a=O("intermediate"),n=O("expert"),r=0,i=0,l=0;return r=t.length<10?-1:t[9]&&t[9].highscore,i=a.length<10?-1:a[9]&&a[9].highscore,l=n.length<10?-1:n[9]&&n[9].highscore,e.lastValue(r,i,l),s.a.createElement("div",{className:"main"},s.a.createElement("div",{className:"category"},s.a.createElement("div",{className:"title"},"Beginner"),s.a.createElement("ol",null,t.map((function(e){return s.a.createElement("li",{className:"item",key:e.id},s.a.createElement("div",null,s.a.createElement("div",{className:"name"},e.name),s.a.createElement("div",{className:"score"},e.highscore)))})))),s.a.createElement("div",{className:"category"},s.a.createElement("div",{className:"title"},"Intermediate"),s.a.createElement("ol",null,a.map((function(e){return s.a.createElement("li",{className:"item",key:e.id},s.a.createElement("div",null,s.a.createElement("div",{className:"name"},e.name),s.a.createElement("div",{className:"score"},e.highscore)))})))),s.a.createElement("div",{className:"category"},s.a.createElement("div",{className:"title"},"Expert"),s.a.createElement("ol",{className:"ol"},n.map((function(e){return s.a.createElement("li",{className:"item",key:e.id},s.a.createElement("div",null,s.a.createElement("div",{className:"name"},e.name),s.a.createElement("div",{className:"score"},e.highscore)))})))))},j=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this)).manageDifficulty=function(){s.state.isOpen?s.setState({isOpen:!1}):s.setState({isOpen:!0})},s.onNewGame=function(e,t,a){s.manageDifficulty(),s.setState({rows:e,columns:t,mines:a},(function(){s.game.current.reset()}))},s.getLastValue=function(e,t,a){null!==s.game.current&&s.game.current.setLastValues(e,t,a)},s.state={isOpen:!1,rows:9,columns:9,mines:10},s.game=Object(n.createRef)(),s}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("div",{className:"game"},s.a.createElement("button",{onClick:this.manageDifficulty},"Difficulty"),s.a.createElement(N,{isOpen:this.state.isOpen,onClose:function(t){return e.setState({isOpen:!1})},onNewGame:this.onNewGame,rows:this.state.rows,columns:this.state.columns,mines:this.state.mines}),s.a.createElement(w,{ref:this.game,rows:this.state.rows,columns:this.state.columns,mines:this.state.mines,flags:this.state.mines})),s.a.createElement("div",{className:"highscore"},s.a.createElement(S,{lastValue:this.getLastValue})))}}]),a}(n.Component);i.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(j,null)),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.718bc33d.chunk.js.map